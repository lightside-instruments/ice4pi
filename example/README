This example builds an image that allows access to SPI device on the Raspberry Pi bus transparently through /dev/spidev-0.1

Assuming you are running as root on a Ultra96 ver.2 with chrooted Debian (tested with bullseye):

1. Install all necessary packages to synthesize top.v and build bit image (top.bin):

 apt-get install yosys fpga-icestorm arachne-pnr flashrom
 make

2. Load the top.bin file to the shield:

 sudo make load
